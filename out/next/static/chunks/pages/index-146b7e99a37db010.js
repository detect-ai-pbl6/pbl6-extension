(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6347)}])},6347:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return N}});var t=s(5893),r=s(7294);s(1163);var o=s(6467),i=s.n(o),n=s(6501);let l=async()=>{let e=localStorage.getItem("refresh");if(!e)return n.ZP.error("No refresh token available"),!1;try{let a=await fetch("".concat("https://pbl6.site/api","/auth/refresh-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e})});if(!a.ok){let e=await a.json(),s=(null==e?void 0:e.message)||"Failed to refresh access token";throw Error(s)}let s=await a.json(),t=Date.now()+3e5;return localStorage.setItem("access",s.access),localStorage.setItem("refresh",s.refresh),localStorage.setItem("expiration",t.toString()),n.ZP.success("Access token refreshed successfully"),!0}catch(e){return console.error(e),n.ZP.error(e.message||"Failed to refresh access token"),!1}},c=e=>{let{navigateToPage:a}=e,[s,o]=(0,r.useState)(""),[n,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[u,p]=(0,r.useState)(!1),h=async()=>{let e=localStorage.getItem("access"),s=localStorage.getItem("refresh"),t=localStorage.getItem("expiration");if(e&&s&&t){let e=Date.now(),s=parseInt(t,10);if(e<s)p(!0);else{let e=await l();e?p(!0):(p(!1),a&&a("login"))}}else p(!1),a&&a("login")};(0,r.useEffect)(()=>{h()},[a]);let g=async e=>{var a;if(await h(),!u)return;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!s)return;let t=URL.createObjectURL(s);o(t);let r=new FormData;r.append("file",s);try{let e=await fetch("/api/upload",{method:"POST",body:r}),a=await e.json();c(a.analysis),m(a.confidence)}catch(e){c("likely to contain AI Generated Text"),m("99.9%")}},_=async e=>{var a;if(await h(),!u)return;let s=null===(a=e.clipboardData)||void 0===a?void 0:a.items;if(s){for(let e=0;e<s.length;e++)if(s[e].type.startsWith("image/")){let a=s[e].getAsFile();if(a){let e=URL.createObjectURL(a);o(e);let s=new FormData;s.append("file",a);try{let e=await fetch("/api/upload",{method:"POST",body:s}),a=await e.json();c(a.analysis),m(a.confidence)}catch(e){c("likely to contain AI Generated Text"),m("99.9%")}}break}}};return(0,r.useEffect)(()=>(u?document.addEventListener("paste",_):document.removeEventListener("paste",_),()=>{document.removeEventListener("paste",_)}),[u]),(0,t.jsx)("div",{className:i().container,children:(0,t.jsxs)("main",{className:i().main,children:[(0,t.jsx)("h1",{className:i().title,children:"AI-GENERATED CONTENT DETECTION"}),(0,t.jsx)("p",{className:i().description,children:"Machine learning models to detect AI-generated content"}),(0,t.jsx)("div",{className:i().note,children:(0,t.jsxs)("p",{children:["Upload images and videos here to test our model in real-time!",(0,t.jsx)("br",{}),"Supports png, jpeg, jpg, webp."]})}),(0,t.jsxs)("label",{className:i().uploadArea,children:[s&&(0,t.jsx)("img",{src:s,alt:"Uploaded",className:i().uploadedImage}),(0,t.jsx)("input",{type:"file",accept:"image/*",className:i().hiddenFileInput,onChange:g}),!s&&(0,t.jsx)("p",{className:i().uploadPrompt,children:"Click or Drag to Upload"})]}),!u&&(0,t.jsx)("div",{className:i().uploadPromptMess,children:"Please log in to upload images"}),n&&(0,t.jsxs)("div",{className:i().resultContainer,children:[(0,t.jsx)("div",{className:i().resultTitleContainer,children:(0,t.jsx)("h2",{className:i().resultTitle,children:"Analysis Result"})}),(0,t.jsxs)("div",{className:i().resultContent,children:[(0,t.jsxs)("p",{className:i().resultText,children:["The input is: ",n]}),(0,t.jsx)("p",{className:i().confidenceText,children:d})]})]})]})})};function d(e){let{navigateToPage:a}=e;return(0,t.jsx)("div",{className:i().container,children:(0,t.jsxs)("main",{className:i().main,children:[(0,t.jsx)("h1",{className:i().title,children:"NEXT-CHROME-STARTER"}),(0,t.jsx)("p",{className:i().description,children:"This is an example of a Browser Extension built with NEXT.JS. Please refer to the GitHub repo for running instructions and documentation"}),(0,t.jsx)("h1",{className:i().code,children:"New Page ./components/New/index.js"}),(0,t.jsx)("p",{children:"[ - This is New page content - ]"}),(0,t.jsx)("p",{onClick:()=>a("index"),children:"< Go Back"})]})})}var m=s(1664),u=s.n(m),p=s(8472),h=s(402),g=s.n(h);function _(e){let{onLoginSuccess:a,navigateToPage:s}=e,[o,i]=(0,r.useState)(""),l="https://pbl6.site/api",c="https://pbl6.site",[d,m]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat(c,"/_allauth/browser/v1/config"));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=await e.json();console.log("socialaccount:",a.data.socialaccount),m(a.data.socialaccount.providers)}catch(e){console.error("Failed to fetch providers:",e),n.ZP.error("Failed to fetch providers")}};e()},[c]);let h=e=>/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e),_=async(e,s)=>{try{let t=await fetch("".concat(l,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s})});if(!t.ok)throw alert(r.message||"Login failed."),Error("Invalid email or password");let r=await t.json(),o=Date.now()+3e5;localStorage.setItem("access",r.access),localStorage.setItem("refresh",r.refresh),localStorage.setItem("expiration",o.toString()),alert(r.message||"Login successful."),a(r.user)}catch(e){i("Fail to login"),n.ZP.error("Fail to login")}},x=async e=>{e.preventDefault();let a=e.currentTarget,s=a.email.value,t=a.password.value;if(!h(s)){i("Email is invalid"),n.ZP.error("Email is invalid");return}if(!t||t.length<8){i("Password is invalid"),n.ZP.error("Password must be at least 8 characters");return}await _(s,t)},f=async e=>{chrome.tabs.query({active:!0,currentWindow:!0},e=>{let s=e[0].url;console.log("url: ",s);let t=function(e){let a=new URLSearchParams("https://accounts.google.com"),s=a.get("client_id"),t=a.get("redirect_uri"),r=a.get("scope"),o=a.get("response_type"),i=a.get("state"),n=a.get("access_type"),l=a.get("code_challenge_method"),c=a.get("code_challenge"),d=a.get("service"),m=a.get("o2v"),u=a.get("ddm"),p=a.get("flowName");return console.log("client_id:",s),console.log("redirect_uri:",t),console.log("scope:",r),console.log("response_type:",o),console.log("state:",i),console.log("access_type:",n),console.log("code_challenge_method:",l),console.log("code_challenge:",c),console.log("service:",d),console.log("o2v:",m),console.log("ddm:",u),console.log("flowName:",p),{clientId:s,redirectUri:t,scope:r,responseType:o,state:i,accessType:n,codeChallengeMethod:l,codeChallenge:c,service:d,o2v:m,ddm:u,flowName:p}}(0),r="https://accounts.google.com/o/oauth2/v2/auth/oauthchooseaccount?client_id=".concat(t.clientId,"&redirect_uri=").concat(t.redirectUri,"&scope=").concat(t.scope,"&response_type=").concat(t.responseType,"&state=").concat(t.state,"&access_type=").concat(t.accessType,"&code_challenge_method=").concat(t.codeChallengeMethod,"&code_challenge=").concat(t.codeChallenge,"&service=").concat(t.service,"&o2v=").concat(t.o2v,"&ddm=").concat(t.ddm,"&flowName=").concat(t.flowName);chrome.identity.launchWebAuthFlow({url:r,interactive:!0},async e=>{if(e){let s=new URLSearchParams(new URL(e).search),t=s.get("token");if(t){let e=await fetch("".concat(l,"/auth/tokens"),{credentials:"include"});if(e.ok){let s=await e.json(),t=Date.now()+3e5;localStorage.setItem("access",s.access),localStorage.setItem("refresh",s.refresh),localStorage.setItem("expiration",t.toString()),console.log("Login successful"),alert(s.message||"Login successful."),a(s.user),chrome.windows.getCurrent({},e=>{chrome.windows.remove(e.id)})}else console.error("Error fetching tokens")}else console.error("Failed to get token from callback URL")}else console.error("Authentication failed")})})};return(0,t.jsx)("div",{className:g().container,children:(0,t.jsxs)("div",{className:g()["form-container"],children:[(0,t.jsx)("div",{className:g()["form-header"],children:(0,t.jsx)("h2",{className:g()["form-title"],children:"Sign in to your account"})}),(0,t.jsxs)("div",{className:g()["form-wrapper"],children:[(0,t.jsxs)("form",{className:"space-y-6",onSubmit:x,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:g()["input-label"],children:"Email address"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:g()["input-field"]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:g()["input-label"],children:"Password"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:g()["input-field"]})})]}),(0,t.jsxs)("div",{className:g()["checkbox-wrapper"],children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:g().checkbox}),(0,t.jsx)("label",{htmlFor:"remember-me",className:g()["checkbox-label"],children:"Remember me"})]}),(0,t.jsx)("div",{className:"text-sm leading-6",children:(0,t.jsx)(u(),{href:"#",className:g()["forgot-password"],children:"Forgot password?"})})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:g()["submit-button"],children:"Sign in"})})]}),(0,t.jsxs)("div",{className:g()["separator-wrapper"],children:[(0,t.jsx)("div",{className:g()["separator-line"]}),(0,t.jsx)("div",{className:g()["separator-text"],children:"Or continue with"})]}),(0,t.jsx)("div",{className:g()["social-button-wrapper"],children:null==d?void 0:d.map(e=>{let a=e=>{console.log("handleClick"),f(e,()=>{console.log("Đăng nhập x\xe3 hội th\xe0nh c\xf4ng"),n.ZP.success("Logged in with "+e),s("index")})};return"google"===e.id?(0,t.jsxs)("button",{onClick:()=>a(e.id),children:[(0,t.jsx)(p.JM8,{className:g()["social-button-icon"]}),"Sign in with Google"]},e.id):"github"===e.id?(0,t.jsxs)("button",{onClick:()=>a(e.id),children:[(0,t.jsx)("svg",{"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",width:"16",height:"16",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.91-1.296 2.75-1.026 2.75-1.026.545 1.378.203 2.397.1 2.65.64.7 1.028 1.595 1.028 2.688 0 3.85-2.341 4.688-4.56 4.935.36.305.681.905.681 1.823 0 1.317-.012 2.385-.012 2.705 0 .267.182.578.688.482A10.012 10.012 0 0020 10.017C20 4.484 15.523 0 10 0z",clipRule:"evenodd"})}),"Sign in with GitHub"]},e.id):null})})]})]})})}var x=s(9332);let f=e=>{let{navigateToPage:a}=e,[s,o]=(0,r.useState)({});(0,x.useRouter)();let i=e=>/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e),l=e=>{let a={};return e.firstname||(a.firstname="First name is required."),e.lastname||(a.lastname="Last name is required."),i(e.email)||(a.email="Email is invalid."),(!e.password||e.password.length<8)&&(a.password="Password must be at least 8 characters."),e.password!==e.confirmPassword&&(a.confirmPassword="Passwords do not match."),e.acceptTerms||(a.acceptTerms="You must accept the terms and privacy policy."),a},c=async e=>{e.preventDefault();let s=e.currentTarget,t={firstname:s.firstname.value.trim(),lastname:s.lastname.value.trim(),email:s.email.value.trim(),password:s.password.value.trim(),confirmPassword:s.confirmPassword.value.trim(),acceptTerms:s.terms.checked},r=l(t);if(Object.keys(r).length>0){o(r),Object.values(r).forEach(e=>n.ZP.error(e));return}o({});try{let e=await fetch("".concat("https://pbl6.site/api","/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:t.firstname,lastname:t.lastname,email:t.email,password:t.password})});if(400===e.status||409===e.status){console.log(e.json());let a=await e.json();o({server:a.message||"Registration failed."}),alert(a.message||"Registration failed.");return}if(!e.ok)throw Error("Unexpected error occurred.");alert("Registration successful."),a("login")}catch(e){o({server:"Failed to register."}),n.ZP.error("Failed to register.")}};return(0,t.jsx)("div",{className:g().container,children:(0,t.jsxs)("div",{className:g()["form-container"],children:[(0,t.jsx)("div",{className:g()["form-header"],children:(0,t.jsx)("h2",{className:g()["form-title"],children:"Create an Account"})}),(0,t.jsx)("div",{className:g()["form-wrapper"],children:(0,t.jsxs)("form",{className:"space-y-6",onSubmit:c,children:[(0,t.jsxs)("div",{className:g()["input-wrapper"],children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"firstname",className:g()["input-label"],children:"First name"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"firstname",name:"firstname",type:"text",autoComplete:"given-name",className:g()["input-field"]})}),s.firstname&&(0,t.jsx)("p",{className:g()["error-message"],children:s.firstname})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"lastname",className:g()["input-label"],children:"Last name"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"lastname",name:"lastname",type:"text",autoComplete:"family-name",className:g()["input-field"]})}),s.lastname&&(0,t.jsx)("p",{className:g()["error-message"],children:s.lastname})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:g()["input-label"],children:"Email address"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",className:g()["input-field"]})}),s.email&&(0,t.jsx)("p",{className:g()["error-message"],children:s.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:g()["input-label"],children:"Password"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",className:g()["input-field"]})}),s.password&&(0,t.jsx)("p",{className:g()["error-message"],children:s.password})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:g()["input-label"],children:"Confirm Password"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",className:g()["input-field"]})}),s.confirmPassword&&(0,t.jsx)("p",{className:g()["error-message"],children:s.confirmPassword})]}),(0,t.jsxs)("div",{className:g().checkbox,children:[(0,t.jsx)("input",{id:"terms",name:"terms",type:"checkbox",className:g()["input-checkbox"]}),(0,t.jsx)("label",{htmlFor:"terms",className:g()["input-checkbox-label"],children:"Accept our terms and privacy policy"}),s.acceptTerms&&(0,t.jsx)("p",{className:g()["error-message"],children:s.acceptTerms})]}),s.server&&(0,t.jsx)("p",{className:g()["error-message"],children:s.server}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:g()["submit-button"],children:"Create Account"})})]})})]})})};s(5675);var j=s(1584),v=s.n(j);let w=e=>{let{user:a,setUser:s,navigateToPage:o}=e;(0,r.useEffect)(()=>{let e=async()=>{let e=localStorage.getItem("access"),a=localStorage.getItem("expiration");if(e&&a&&Date.now()<parseInt(a))try{let a=await fetch("".concat("https://pbl6.site/api","/users/me"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw Error("Failed to fetch user data");let t=await a.json();s(t.email)}catch(e){console.error(e)}};e()},[a]);let i=()=>{console.log("User signed out"),s(null),localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("expiration"),window.location.reload()};return(0,t.jsx)("div",{className:v().container,children:(0,t.jsxs)("nav",{className:v().navbar,children:[(0,t.jsx)("ul",{className:v().navLinks,children:(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"#",onClick:()=>o("index"),children:"Home"})})}),(0,t.jsx)("div",{className:v().authLinks,children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:v().username,children:a}),(0,t.jsx)("button",{onClick:()=>{i(),localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("expiration")},className:v().signupButton,children:"Log out"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("ul",{className:v().navLinks,children:(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"#",onClick:()=>o("login"),children:"Login"})})}),(0,t.jsx)("button",{onClick:()=>o("register"),className:v().signupButton,children:"Sign up"})]})})]})})};function N(){let[e,a]=(0,r.useState)("index"),[s,o]=(0,r.useState)(null),i=e=>{a(e)},n=e=>{o(e),a("index")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{user:s,setUser:o,navigateToPage:i}),"index"===e&&(0,t.jsx)(c,{navigateToPage:i}),"new"===e&&(0,t.jsx)(d,{navigateToPage:i}),"login"===e&&(0,t.jsx)(_,{onLoginSuccess:n,navigateToPage:i}),"register"===e&&(0,t.jsx)(f,{navigateToPage:i})]})}},402:function(e){e.exports={container:"Login_container__TKPt4",main:"Login_main__gWxqA",title:"Login_title__s50E1","form-container":"Login_form-container__7TVJC","form-header":"Login_form-header__IqDg_","form-title":"Login_form-title__ecqcR","form-wrapper":"Login_form-wrapper__MCpnh","input-field":"Login_input-field__7t4xU","input-label":"Login_input-label___3IyZ","input-wrapper":"Login_input-wrapper__MCXf4",checkbox:"Login_checkbox__JRO0W","input-checkbox-label":"Login_input-checkbox-label__Fyy0h","input-checkbox":"Login_input-checkbox__sy1Ex","forgot-password":"Login_forgot-password__pkbgo","submit-button":"Login_submit-button__uIN8d","separator-wrapper":"Login_separator-wrapper__yRC_z","separator-text":"Login_separator-text__XpQWK","social-button-wrapper":"Login_social-button-wrapper__ogbo8","social-button":"Login_social-button__7JBTL","social-button-icon":"Login_social-button-icon__WtKrK",github:"Login_github__42i4Y","error-message":"Login_error-message__j_UOp"}},1584:function(e){e.exports={container:"Navbar_container__rxFeS",navbar:"Navbar_navbar__66x_3",logo:"Navbar_logo__E_Sw_",navLinks:"Navbar_navLinks__EHN_C",authLinks:"Navbar_authLinks__PllyM",loginLink:"Navbar_loginLink__Bo0LY",logoutLink:"Navbar_logoutLink__654A0",signupButton:"Navbar_signupButton__9TiuZ",username:"Navbar_username__SPuCx"}},6467:function(e){e.exports={container:"Pages_container__SbWhT",main:"Pages_main__5_Vsf",title:"Pages_title__5_zk8",description:"Pages_description__Vsj9E",note:"Pages_note__qSXNk",code:"Pages_code__vzNOX",uploadArea:"Pages_uploadArea__Ji0Oz",uploadedImage:"Pages_uploadedImage__FTJVi",hiddenFileInput:"Pages_hiddenFileInput__heSwm",uploadPrompt:"Pages_uploadPrompt__uPTEN",uploadPromptMess:"Pages_uploadPromptMess__sIZIu",resultContainer:"Pages_resultContainer__Tdd_c",resultTitleContainer:"Pages_resultTitleContainer__YsTmn",resultTitle:"Pages_resultTitle___c8th",resultContent:"Pages_resultContent__U2I9z",resultText:"Pages_resultText__1KJF2",confidenceText:"Pages_confidenceText__C4P0I"}}},function(e){e.O(0,[232,576,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);