(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(939)}])},939:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return E}});var a=t(5893),r=t(7294),i=t(6467),n=t.n(i);let o=e=>{var s;let{url:t,token:a}=e,[i,n]=(0,r.useState)(!1),[o,l]=(0,r.useState)(),c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!a||"string"!=typeof a||""===a.trim()){console.error("Invalid token for WebSocket subprotocol");return}let e=new WebSocket(t,["Token",a]);return e.onopen=()=>n(!0),e.onclose=()=>n(!1),e.onmessage=e=>l(e.data),c.current=e,()=>{e.close()}},[t,a]),{ready:i,ws:c.current,val:o,send:null===(s=c.current)||void 0===s?void 0:s.send.bind(c.current)}},l=e=>{let{navigateToPage:s}=e,[t,i]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[p,_]=(0,r.useState)(""),[g,x]=(0,r.useState)(!1),f="https://pbl6.site/api";(0,r.useEffect)(()=>{document.addEventListener("paste",T);let e=async()=>{chrome.storage.local.get(["accessToken","expirationTime","refreshToken"],async e=>{let{accessToken:s,expirationTime:t,refreshToken:a}=e;if(s&&a&&t){let e=Date.now(),a=parseInt(t,10);e<a?(h(!0),_(s)):h(!1)}else h(!1)})};e()},[s]);let{ready:j,ws:b,val:y,send:N}=o({url:"wss://pbl6.site/ws",token:p||""});(0,r.useEffect)(()=>{j&&b&&(b.onmessage=e=>{x(!1);let s=JSON.parse(e.data);i(s.image_url);let t=s.prediction.type,a=s.prediction.confidence_percentage,r=parseFloat(a.replace("%",""));m("".concat("Real"===t?100-r:r,"%")),c(t)},b.onclose=()=>{console.log("WebSocket closed, attempting to reconnect..."),x(!1);let e=()=>{console.log("Reconnecting...");let s=new WebSocket("wss://pbl6.site/ws",["Token",p]);s.onopen=()=>{console.log("WebSocket Reconnected")},s.onclose=()=>{console.log("WebSocket closed again, attempting to reconnect..."),setTimeout(e,5e3)},s.onmessage=e=>{console.log(e.data)}};e()})},[j,b,p]);let w=e=>{var s;let t=null===(s=e.name.split(".").pop())||void 0===s?void 0:s.toLowerCase();return"image/".concat(t)},v=async(e,s)=>{x(!0);try{let t=await new Promise((e,s)=>{chrome.storage.local.get(["accessToken"],t=>{if(chrome.runtime.lastError)return s(chrome.runtime.lastError);e(t)})});if(!t.accessToken)throw Error("Missing access token");let a=t.accessToken,r=await fetch("".concat(f,"/files/signed-url"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({mime_type:s})});if(!r.ok)throw Error("Failed to get signed URL");let{upload_url:n,file_url:o}=await r.json();i(o);let l=await fetch(n,{method:"PUT",body:e});if(!l.ok)throw Error("File upload failed");let c=await new Promise((e,s)=>{chrome.storage.local.get(["apiKey"],t=>{if(chrome.runtime.lastError)return s(chrome.runtime.lastError);e(t)})}),d=await fetch("".concat(f,"/predictions"),{method:"POST",body:JSON.stringify({image_url:o}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a),"x-api-key":c.apiKey}});if(!d.ok)throw Error("Prediction request failed")}catch(e){console.log(e.message||"Error processing file")}finally{x(!1)}},k=async e=>{var t;if(!u){s("login");return}let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a)try{let e=w(a);await v(a,e)}catch(e){console.log(e.message||"Error processing file")}},T=async e=>{var t;if(!u){s("login");return}let a=null===(t=e.clipboardData)||void 0===t?void 0:t.items;if(a){for(let e=0;e<a.length;e++)if(a[e].type.startsWith("image/")){let s=a[e].getAsFile();if(!s)continue;try{let e=w(s);await v(s,e)}catch(e){console.log(e.message||"Error processing pasted image")}break}}};return(0,a.jsx)("div",{className:n().container,children:(0,a.jsxs)("main",{className:n().main,children:[(0,a.jsx)("h1",{className:n().title,children:"AI-GENERATED CONTENT DETECTION"}),(0,a.jsx)("p",{className:n().description,children:"Machine learning models to detect AI-generated content"}),(0,a.jsx)("div",{className:n().note,children:(0,a.jsxs)("p",{children:["Upload images and videos here to test our model in real-time!",(0,a.jsx)("br",{}),"Supports png, jpeg, jpg, webp."]})}),(0,a.jsxs)("label",{className:n().uploadArea,children:[g&&(0,a.jsxs)("div",{className:n().loadingIndicator,children:[(0,a.jsx)("div",{className:n().loader}),(0,a.jsx)("p",{children:"Loading..."})]}),!g&&t&&(0,a.jsx)("img",{src:t,alt:"Uploaded",className:n().uploadedImage}),(0,a.jsx)("input",{type:"file",accept:"image/*",className:n().hiddenFileInput,onChange:k}),!t&&(0,a.jsx)("p",{className:n().uploadPrompt,children:"Click or Drag to Upload"})]}),!u&&(0,a.jsx)("div",{className:n().uploadPromptMess,children:"Please log in to upload images"}),l&&(0,a.jsxs)("div",{className:n().resultContainer,children:[(0,a.jsx)("div",{className:n().resultTitleContainer,children:(0,a.jsx)("h2",{className:n().resultTitle,children:"Analysis Result"})}),(0,a.jsxs)("div",{className:n().resultContent,children:[(0,a.jsxs)("p",{className:n().resultText,children:["The input is: ",l]}),(0,a.jsx)("p",{className:n().confidenceText,children:d})]})]})]})})};function c(e){let{navigateToPage:s}=e;return(0,a.jsx)("div",{className:n().container,children:(0,a.jsxs)("main",{className:n().main,children:[(0,a.jsx)("h1",{className:n().title,children:"NEXT-CHROME-STARTER"}),(0,a.jsx)("p",{className:n().description,children:"This is an example of a Browser Extension built with NEXT.JS. Please refer to the GitHub repo for running instructions and documentation"}),(0,a.jsx)("h1",{className:n().code,children:"New Page ./components/New/index.js"}),(0,a.jsx)("p",{children:"[ - This is New page content - ]"}),(0,a.jsx)("p",{onClick:()=>s("index"),children:"< Go Back"})]})})}var d=t(6501),m=t(9039),u=t.n(m);function h(e){let{navigateToPage:s}=e,[t,i]=(0,r.useState)("free_tier"),[n,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(1),[m,h]=(0,r.useState)(5),[p,_]=(0,r.useState)(!1),g="https://pbl6.site/api",x=async()=>{try{let e=await new Promise((e,s)=>{chrome.storage.local.get(["accessToken"],t=>{if(chrome.runtime.lastError)return s(chrome.runtime.lastError);e(t)})});console.log("fetchApiKeys accessToken: ",e.accessToken);let s=await fetch("".concat(g,"/api-keys?page=").concat(l,"&limit=").concat(m),{method:"GET",headers:{Authorization:"Bearer ".concat(e.accessToken)}});if(!s.ok)throw Error("Failed to fetch API keys");let t=await s.json();o(t.results),_(t.results.length===m)}catch(e){console.error("Error fetching API keys:",e)}};(0,r.useEffect)(()=>{x()},[l,m]);let f=async e=>{e.preventDefault();let s=await new Promise((e,s)=>{chrome.storage.local.get(["accessToken"],t=>{if(chrome.runtime.lastError)return s(chrome.runtime.lastError);e(t)})});if(!s.accessToken){d.ZP.error("Access token is missing");return}try{let e=await fetch("".concat(g,"/api-keys"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.accessToken)},body:JSON.stringify({api_key_type:t,is_default:!0})});e.ok?(d.ZP.success("API Key created successfully!"),x()):d.ZP.error("Failed to create API Key")}catch(e){d.ZP.error("Error creating API Key")}},j=async e=>{let s=await new Promise((e,s)=>{chrome.storage.local.get(["accessToken"],t=>{if(chrome.runtime.lastError)return s(chrome.runtime.lastError);e(t)})});if(!s.accessToken){d.ZP.error("Access token is missing");return}try{let t=await fetch("".concat(g,"/api-keys/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s.accessToken)}});t.ok?(d.ZP.success("API Key deleted successfully!"),x()):d.ZP.error("Failed to delete API Key")}catch(e){d.ZP.error("Error deleting API Key")}},b=async(e,s)=>{let t=await new Promise((e,s)=>{chrome.storage.local.get(["accessToken"],t=>{if(chrome.runtime.lastError)return s(chrome.runtime.lastError);e(t)})});if(!t.accessToken){d.ZP.error("Access token is missing");return}try{let a=await fetch("".concat(g,"/api-keys/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.accessToken)},body:JSON.stringify({is_default:!s})});a.ok?(x(),d.ZP.success("API Key updated successfully!")):d.ZP.error("Failed to update API Key")}catch(e){d.ZP.error("Error updating API Key")}},y=()=>{p&&c(e=>e+1)},N=()=>c(e=>Math.max(e-1,1));return(0,a.jsxs)("div",{className:u().container,children:[(0,a.jsx)("h1",{className:u().title,children:"Create API Key"}),(0,a.jsxs)("form",{onSubmit:f,className:u().form,children:[(0,a.jsxs)("label",{className:u().label,children:["API Key Type:",(0,a.jsxs)("select",{value:t,onChange:e=>i(e.target.value),className:u().select,children:[(0,a.jsx)("option",{value:"free_tier",children:"Free Tier"}),(0,a.jsx)("option",{value:"enterprise_tier",children:"Enterprise Tier"}),(0,a.jsx)("option",{value:"custom_tier",children:"Custom Tier"})]})]}),(0,a.jsx)("button",{type:"submit",className:u()["button-submit"],children:"Create API Key"})]}),(0,a.jsx)("h2",{className:u().subtitle,children:"Existing API Keys"}),(0,a.jsx)("div",{className:u()["table-container"],children:(0,a.jsxs)("table",{className:u().table,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"Key"}),(0,a.jsx)("th",{children:"Type"}),(0,a.jsx)("th",{children:"Default"}),(0,a.jsx)("th",{children:"Max Usage"}),(0,a.jsx)("th",{children:"Total Usage"}),(0,a.jsx)("th",{children:"Created At"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:n.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),(0,a.jsx)("td",{children:e.api_key}),(0,a.jsx)("td",{children:e.api_key_type}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{style:{fontWeight:e.is_default?"bold":"normal"},children:e.is_default?"Yes":"No"})}),(0,a.jsx)("td",{children:e.maximum_usage}),(0,a.jsx)("td",{children:e.total_usage}),(0,a.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsxs)("td",{children:[(0,a.jsx)("button",{onClick:()=>b(e.id,e.is_default),className:"".concat(u().button," ").concat(u().update),disabled:e.total_usage>=e.maximum_usage,children:"Update"}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"".concat(u().button," ").concat(u().delete),children:"Delete"})]})]},e.id))})]})}),(0,a.jsxs)("div",{className:u().pagination,children:[(0,a.jsx)("button",{onClick:N,disabled:1===l,className:u()["pagination-button"],children:"Prev"}),(0,a.jsx)("button",{onClick:y,disabled:!p,className:u()["pagination-button"],children:"Next"})]})]})}var p=t(3434),_=t.n(p);function g(e){let{navigateToPage:s}=e,[t,i]=(0,r.useState)([]),[n,o]=(0,r.useState)(1),[l,c]=(0,r.useState)(5),[m,u]=(0,r.useState)(!1),h=async()=>{try{let e=await new Promise((e,s)=>{chrome.storage.local.get(["accessToken"],t=>{if(chrome.runtime.lastError)return s(chrome.runtime.lastError);e(t)})}),s=await fetch("".concat("https://pbl6.site/api","/history?page=").concat(n,"&limit=").concat(l),{method:"GET",headers:{Authorization:"Bearer ".concat(e.accessToken)}});if(!s.ok)throw Error("Failed to fetch history");let t=await s.json();i(t.results),u(t.results.length===l)}catch(e){console.error("Error fetching history:",e),d.ZP.error("Failed to fetch history")}};(0,r.useEffect)(()=>{h()},[n,l]);let p=()=>{m&&o(e=>e+1)},g=()=>o(e=>Math.max(e-1,1));return(0,a.jsxs)("div",{className:_().container,children:[(0,a.jsx)("h1",{className:_().title,children:"History"}),(0,a.jsx)("div",{className:_()["table-container"],children:(0,a.jsxs)("table",{className:_().table,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border px-4 py-2",children:"ID"}),(0,a.jsx)("th",{className:"border px-4 py-2",children:"Image"}),(0,a.jsx)("th",{className:"border px-4 py-2",children:"Prediction Type"}),(0,a.jsx)("th",{className:"border px-4 py-2",children:"Status"}),(0,a.jsx)("th",{className:"border px-4 py-2",children:"Created At"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border px-4 py-2",children:e.id}),(0,a.jsx)("td",{className:"border px-4 py-2",children:(0,a.jsx)("img",{src:e.results.image_url,alt:"Prediction",className:"".concat(_().image)})}),(0,a.jsx)("td",{className:"border px-4 py-2",children:e.results.prediction.type}),(0,a.jsx)("td",{className:"border px-4 py-2",children:e.results.status}),(0,a.jsx)("td",{className:"border px-4 py-2",children:new Date(e.created_at).toLocaleString()})]},e.id))})]})}),(0,a.jsxs)("div",{className:_().pagination,children:[(0,a.jsx)("button",{onClick:g,disabled:1===n,className:_()["pagination-button"],children:"Prev"}),(0,a.jsx)("button",{onClick:p,disabled:!m,className:_()["pagination-button"],children:"Next"})]})]})}var x=t(1664),f=t.n(x),j=t(8472),b=t(402),y=t.n(b);function N(e){let{onLoginSuccess:s,navigateToPage:t}=e,[i,n]=(0,r.useState)(""),o="https://pbl6.site",[l,c]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat(o,"/_allauth/browser/v1/config"));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=await e.json();console.log("socialaccount:",s.data.socialaccount),c(s.data.socialaccount.providers)}catch(e){console.error("Failed to fetch providers:",e),d.ZP.error("Failed to fetch providers")}};e()},[o]);let m=e=>/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e),u=async(e,t)=>{try{var a,r,i;let n=await fetch("".concat("https://pbl6.site/api","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!n.ok)throw alert(o.message||"Login failed."),Error("Invalid email or password");let o=await n.json(),l=Date.now()+3e5;console.log("data: ",o),a=o.access,r=o.refresh,i=o.api_key,chrome.runtime.sendMessage({type:"STORAGE_UPDATED",payload:{accessToken:a,refreshToken:r,expirationTime:l,apiKey:i}},e=>{chrome.runtime.lastError?console.error("Error during storage update:",chrome.runtime.lastError.message):console.log("STORAGE_UPDATED response:",null==e?void 0:e.message)}),alert(o.message||"Login successful."),s(o.user)}catch(e){n("Fail to login"),d.ZP.error("Fail to login")}},h=async e=>{e.preventDefault();let s=e.currentTarget,t=s.email.value,a=s.password.value;if(!m(t)){n("Email is invalid"),d.ZP.error("Email is invalid");return}if(!a||a.length<8){n("Password is invalid"),d.ZP.error("Password must be at least 8 characters");return}await u(t,a)},p=e=>{window.open("https://pbl6-frontend-hoai-baos-projects.vercel.app/login","_blank")};return(0,a.jsx)("div",{className:y().container,children:(0,a.jsxs)("div",{className:y()["form-container"],children:[(0,a.jsx)("div",{className:y()["form-header"],children:(0,a.jsx)("h2",{className:y()["form-title"],children:"Sign in to your account"})}),(0,a.jsxs)("div",{className:y()["form-wrapper"],children:[(0,a.jsxs)("form",{className:"space-y-6",onSubmit:h,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:y()["input-label"],children:"Email address"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:y()["input-field"]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:y()["input-label"],children:"Password"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:y()["input-field"]})})]}),(0,a.jsxs)("div",{className:y()["checkbox-wrapper"],children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:y().checkbox}),(0,a.jsx)("label",{htmlFor:"remember-me",className:y()["checkbox-label"],children:"Remember me"})]}),(0,a.jsx)("div",{className:"text-sm leading-6",children:(0,a.jsx)(f(),{href:"#",className:y()["forgot-password"],children:"Forgot password?"})})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:y()["submit-button"],children:"Sign in"})})]}),(0,a.jsxs)("div",{className:y()["separator-wrapper"],children:[(0,a.jsx)("div",{className:y()["separator-line"]}),(0,a.jsx)("div",{className:y()["separator-text"],children:"Or continue with"})]}),(0,a.jsx)("div",{className:y()["social-button-wrapper"],children:null==l?void 0:l.map(e=>{let s=e=>{console.log("handleClick"),p(e,()=>{console.log("Đăng nhập x\xe3 hội th\xe0nh c\xf4ng"),d.ZP.success("Logged in with "+e),t("index")})};return"google"===e.id?(0,a.jsxs)("button",{onClick:()=>s(e.id),children:[(0,a.jsx)(j.JM8,{className:y()["social-button-icon"]}),"Sign in with Google"]},e.id):"github"===e.id?(0,a.jsxs)("button",{onClick:()=>s(e.id),children:[(0,a.jsx)("svg",{"aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",width:"16",height:"16",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.91-1.296 2.75-1.026 2.75-1.026.545 1.378.203 2.397.1 2.65.64.7 1.028 1.595 1.028 2.688 0 3.85-2.341 4.688-4.56 4.935.36.305.681.905.681 1.823 0 1.317-.012 2.385-.012 2.705 0 .267.182.578.688.482A10.012 10.012 0 0020 10.017C20 4.484 15.523 0 10 0z",clipRule:"evenodd"})}),"Sign in with GitHub"]},e.id):null})})]})]})})}t(1163);var w=t(9332);let v=e=>{let{navigateToPage:s}=e,[t,i]=(0,r.useState)({});(0,w.useRouter)();let n=e=>/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e),o=e=>{let s={};return e.firstname||(s.firstname="First name is required."),e.lastname||(s.lastname="Last name is required."),n(e.email)||(s.email="Email is invalid."),(!e.password||e.password.length<8)&&(s.password="Password must be at least 8 characters."),e.password!==e.confirmPassword&&(s.confirmPassword="Passwords do not match."),e.acceptTerms||(s.acceptTerms="You must accept the terms and privacy policy."),s},l=async e=>{e.preventDefault();let t=e.currentTarget,a={firstname:t.firstname.value.trim(),lastname:t.lastname.value.trim(),email:t.email.value.trim(),password:t.password.value.trim(),confirmPassword:t.confirmPassword.value.trim(),acceptTerms:t.terms.checked},r=o(a);if(Object.keys(r).length>0){i(r),Object.values(r).forEach(e=>d.ZP.error(e));return}i({});try{let e=await fetch("".concat("https://pbl6.site/api","/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:a.firstname,lastname:a.lastname,email:a.email,password:a.password})});if(400===e.status||409===e.status){console.log(e.json());let s=await e.json();i({server:s.message||"Registration failed."}),alert(s.message||"Registration failed.");return}if(!e.ok)throw Error("Unexpected error occurred.");alert("Registration successful."),s("login")}catch(e){i({server:"Failed to register."}),d.ZP.error("Failed to register.")}};return(0,a.jsx)("div",{className:y().container,children:(0,a.jsxs)("div",{className:y()["form-container"],children:[(0,a.jsx)("div",{className:y()["form-header"],children:(0,a.jsx)("h2",{className:y()["form-title"],children:"Create an Account"})}),(0,a.jsx)("div",{className:y()["form-wrapper"],children:(0,a.jsxs)("form",{className:"space-y-6",onSubmit:l,children:[(0,a.jsxs)("div",{className:y()["input-wrapper"],children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"firstname",className:y()["input-label"],children:"First name"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{id:"firstname",name:"firstname",type:"text",autoComplete:"given-name",className:y()["input-field"]})}),t.firstname&&(0,a.jsx)("p",{className:y()["error-message"],children:t.firstname})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"lastname",className:y()["input-label"],children:"Last name"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{id:"lastname",name:"lastname",type:"text",autoComplete:"family-name",className:y()["input-field"]})}),t.lastname&&(0,a.jsx)("p",{className:y()["error-message"],children:t.lastname})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:y()["input-label"],children:"Email address"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",className:y()["input-field"]})}),t.email&&(0,a.jsx)("p",{className:y()["error-message"],children:t.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:y()["input-label"],children:"Password"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",className:y()["input-field"]})}),t.password&&(0,a.jsx)("p",{className:y()["error-message"],children:t.password})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:y()["input-label"],children:"Confirm Password"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",className:y()["input-field"]})}),t.confirmPassword&&(0,a.jsx)("p",{className:y()["error-message"],children:t.confirmPassword})]}),(0,a.jsxs)("div",{className:y().checkbox,children:[(0,a.jsx)("input",{id:"terms",name:"terms",type:"checkbox",className:y()["input-checkbox"]}),(0,a.jsx)("label",{htmlFor:"terms",className:y()["input-checkbox-label"],children:"Accept our terms and privacy policy"}),t.acceptTerms&&(0,a.jsx)("p",{className:y()["error-message"],children:t.acceptTerms})]}),t.server&&(0,a.jsx)("p",{className:y()["error-message"],children:t.server}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:y()["submit-button"],children:"Create Account"})})]})})]})})};var k=t(1584),T=t.n(k);let P=e=>{let{user:s,setUser:t,navigateToPage:i}=e;(0,r.useEffect)(()=>{let e=async()=>{chrome.storage.local.get(["accessToken","expirationTime"],async e=>{let{accessToken:s,expirationTime:a}=e;if(s)try{let e=await fetch("".concat("https://pbl6.site/api","/users/me"),{method:"GET",headers:{Authorization:"Bearer ".concat(s)}});if(!e.ok)throw Error("Failed to fetch user data");let a=await e.json();t(a)}catch(e){console.error(e)}else console.log("No access token found.")})};e()},[]);let n=()=>{t(null),chrome.runtime.sendMessage({type:"LOGOUT_EXT"},e=>{chrome.runtime.lastError?console.error("Error during logout:",chrome.runtime.lastError.message):console.log("Logged out successfully:",e.message)})};return(0,a.jsx)("div",{className:T().container,children:(0,a.jsxs)("nav",{className:T().navbar,children:[(0,a.jsxs)("ul",{className:T().navLinks,children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",onClick:()=>i("index"),children:"Home"})}),s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",onClick:()=>i("keys"),children:"Keys"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",onClick:()=>i("history"),children:"History"})})]}):null]}),(0,a.jsx)("div",{className:T().authLinks,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:T().username,children:s.email}),(0,a.jsx)("button",{onClick:()=>{n()},className:T().signupButton,children:"Log out"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("ul",{className:T().navLinks,children:(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",onClick:()=>i("login"),children:"Login"})})}),(0,a.jsx)("button",{onClick:()=>i("register"),className:T().signupButton,children:"Sign up"})]})})]})})};function E(){let[e,s]=(0,r.useState)("index"),[t,i]=(0,r.useState)(null),n=e=>{s(e)},o=async e=>{try{let s=await fetch("".concat("https://pbl6.site/api","/users/me"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!s.ok)throw Error("Failed to fetch user data");let t=await s.json();i(t)}catch(e){console.error("Error fetching user data:",e)}},d=()=>{chrome.storage.local.get(["accessToken"],e=>{e.accessToken&&o(e.accessToken)}),s("index")};return(0,r.useEffect)(()=>{let e=()=>{chrome.storage.local.get(["accessToken"],e=>{e.accessToken&&o(e.accessToken)})};return e(),chrome.storage.onChanged.addListener((s,t)=>{"local"===t&&s.accessToken&&e()}),()=>{chrome.storage.onChanged.removeListener()}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P,{user:t,setUser:i,navigateToPage:n}),"index"===e&&(0,a.jsx)(l,{navigateToPage:n}),"new"===e&&(0,a.jsx)(c,{navigateToPage:n}),"keys"===e&&(0,a.jsx)(h,{navigateToPage:n}),"history"===e&&(0,a.jsx)(g,{navigateToPage:n}),"login"===e&&(0,a.jsx)(N,{onLoginSuccess:d,navigateToPage:n}),"register"===e&&(0,a.jsx)(v,{navigateToPage:n})]})}},3434:function(e){e.exports={container:"History_container__wtKLt","keys-container":"History_keys-container__hYxvL",title:"History_title__7EXJC",subtitle:"History_subtitle__9nbHs",form:"History_form__yukk2",label:"History_label__DeS9T",select:"History_select__zvrxL","table-container":"History_table-container__5tops",table:"History_table__aOjNH","button-submit":"History_button-submit__4dxCM",button:"History_button__v6ZLb",update:"History_update__uyUi9",delete:"History_delete__T0MpM",pagination:"History_pagination__v_u1A","pagination-button":"History_pagination-button__uskqx",image:"History_image__I_8kj"}},9039:function(e){e.exports={container:"Keys_container__o_jlw","keys-container":"Keys_keys-container__OYYD1",title:"Keys_title__hejHG",subtitle:"Keys_subtitle__lnsAV",form:"Keys_form__D_KAl",label:"Keys_label__o2vB2",select:"Keys_select__Bn5le","table-container":"Keys_table-container__5PMou",table:"Keys_table__d12O9","button-submit":"Keys_button-submit__SoocB",button:"Keys_button__CrFni",update:"Keys_update__8wqK4",delete:"Keys_delete__72aHZ",pagination:"Keys_pagination__hbZZS","pagination-button":"Keys_pagination-button__IKAWq"}},402:function(e){e.exports={container:"Login_container__TKPt4",main:"Login_main__gWxqA",title:"Login_title__s50E1","form-container":"Login_form-container__7TVJC","form-header":"Login_form-header__IqDg_","form-title":"Login_form-title__ecqcR","form-wrapper":"Login_form-wrapper__MCpnh","input-field":"Login_input-field__7t4xU","input-label":"Login_input-label___3IyZ","input-wrapper":"Login_input-wrapper__MCXf4",checkbox:"Login_checkbox__JRO0W","input-checkbox-label":"Login_input-checkbox-label__Fyy0h","input-checkbox":"Login_input-checkbox__sy1Ex","forgot-password":"Login_forgot-password__pkbgo","submit-button":"Login_submit-button__uIN8d","separator-wrapper":"Login_separator-wrapper__yRC_z","separator-text":"Login_separator-text__XpQWK","social-button-wrapper":"Login_social-button-wrapper__ogbo8","social-button":"Login_social-button__7JBTL","social-button-icon":"Login_social-button-icon__WtKrK",github:"Login_github__42i4Y","error-message":"Login_error-message__j_UOp"}},1584:function(e){e.exports={container:"Navbar_container__rxFeS",navbar:"Navbar_navbar__66x_3",logo:"Navbar_logo__E_Sw_",navLinks:"Navbar_navLinks__EHN_C",authLinks:"Navbar_authLinks__PllyM",loginLink:"Navbar_loginLink__Bo0LY",logoutLink:"Navbar_logoutLink__654A0",signupButton:"Navbar_signupButton__9TiuZ",username:"Navbar_username__SPuCx"}},6467:function(e){e.exports={container:"Pages_container__SbWhT",main:"Pages_main__5_Vsf",title:"Pages_title__5_zk8",description:"Pages_description__Vsj9E",note:"Pages_note__qSXNk",code:"Pages_code__vzNOX",uploadArea:"Pages_uploadArea__Ji0Oz",uploadedImage:"Pages_uploadedImage__FTJVi",hiddenFileInput:"Pages_hiddenFileInput__heSwm",uploadPrompt:"Pages_uploadPrompt__uPTEN",uploadPromptMess:"Pages_uploadPromptMess__sIZIu",resultContainer:"Pages_resultContainer__Tdd_c",resultTitleContainer:"Pages_resultTitleContainer__YsTmn",resultTitle:"Pages_resultTitle___c8th",resultContent:"Pages_resultContent__U2I9z",resultText:"Pages_resultText__1KJF2",confidenceText:"Pages_confidenceText__C4P0I"}}},function(e){e.O(0,[232,945,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);